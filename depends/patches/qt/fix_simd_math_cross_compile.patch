diff --git a/qtbase/src/plugins/platforms/cocoa/qnsview.mm b/qtbase/src/plugins/platforms/cocoa/qnsview.mm
--- a/qtbase/src/plugins/platforms/cocoa/qnsview.mm
+++ b/qtbase/src/plugins/platforms/cocoa/qnsview.mm
@@ -4,6 +4,20 @@
 #include <QtGui/qtguiglobal.h>

 #include <AppKit/AppKit.h>
+// When cross-compiling for Darwin, the __sincospif and __sincospi functions
+// are not available as compiler built-ins. Provide stub implementations
+// before including MetalKit.h which transitively includes simd/math.h.
+#ifndef __sincospif
+#include <math.h>
+__attribute__((always_inline)) static inline void __sincospif(float x, float *sinp, float *cosp) {
+    *sinp = sinf(x * (float)M_PI);
+    *cosp = cosf(x * (float)M_PI);
+}
+__attribute__((always_inline)) static inline void __sincospi(double x, double *sinp, double *cosp) {
+    *sinp = sin(x * M_PI);
+    *cosp = cos(x * M_PI);
+}
+#endif
 #include <MetalKit/MetalKit.h>
 #include <UniformTypeIdentifiers/UTCoreTypes.h>

